String.prototype.hashCode=function(){var a=0,b,c;if(0==this.length)return a;b=0;for(l=this.length;b<l;b++)c=this.charCodeAt(b),a=(a<<5)-a+c,a|=0;return a};preinit();var modationStorage={};clone_storage(function(){init()});
function preinit(){$("body").hasClass("community")&&$("nav.wrapper a[href='/tracks']").after(' <a class="modation-recent-tracks" href="/tracks/recent">Recent</a>');location.href.match(/\/tracks\/recent/)&&($("nav.wrapper .current").removeClass("current"),$(".modation-recent-tracks").addClass("current"))}
function init(){var a=getEmailHash();doMod(a,"sticky_sidebars")&&sticky_sidebars();doMod(a,"group_mods")&&$("div#main:has(.group)").length&&addJQuery(group_mods);doMod(a,"player_downloads")&&player_downloads();doMod(a,"super_pages_global")&&(doMod(a,"super_pages_track_comments")&&location.href.match(/\/user\/[\w-]*\/track\//)&&super_pages("div#comments","modation-sptc"),doMod(a,"super_pages_account_tracks")&&location.href.match(/\/account\/tracks/)&&super_pages("div.tracks-container","modation-spat"),
doMod(a,"super_pages_product_list")&&location.href.match(/\/products|\/categories\/|\/genres\//)&&super_pages("table.product-list","modation-sppl"),doMod(a,"super_pages_feed")&&location.href.match(/\/feed\//)&&super_pages("div#main","modation-spf"),doMod(a,"super_pages_tracks")&&location.href.match(/\/tracks\//)&&super_pages("div#main","modation-spt"),doMod(a,"super_pages_groups")&&location.href.match(/\/groups\//)&&super_pages("div.list-container.groups","modation-spg"),doMod(a,"super_pages_user_tracks")&&
location.href.match(/\/user\/[\w-]*/)&&super_pages("div#tracks","modation-sput"),doMod(a,"super_pages_group_comments")&&location.href.match(/\/group\/[\w-]*/)&&super_pages("div#comments","modation-spgc"));$("body").append('<div class="factory" style="display: none"><button class="modation_watch nice-button pink" style="display: block">Watch Me</button></div>');location.href.match(/\/group\//)&&watchlist_ui();location.href.match(/\/user\/[\w-]*\/track\//)&&watchlist_ui()}
function _factory(a){return $(".factory ."+a).clone()}function addCode(a,b){var c=a[0],d=c.createElement("script");d.text=b;c.body.appendChild(d)}function addLinkedCode(a,b){a.find("head").append("<script src='"+b+"'>\x3c/script>")}function addCSS(a,b,c){var d=!1;"undefined"==typeof c&&(d=!0);var f=a.find("head");if(!d&&a.find("style#"+c).length)return!1;f.append("<style "+(d?"":"id='"+c+"'")+">"+b+"</style>");return!0}
function addJQuery(a){var b=[toggleOldGroups,toggleOnlyAdminGroups,resetModLinks,minifyGroups],c=document.createElement("script");c.setAttribute("src","http://code.jquery.com/jquery-1.10.2.min.js");c.addEventListener("load",function(){var c=document.createElement("script"),f="";b.forEach(function(a){f+=a.toString()});c.textContent="window.jQ=jQuery.noConflict(true);("+a.toString()+")();"+f;document.body.appendChild(c)},!1);document.body.appendChild(c)}
function getEmailHash(){return $(".email").text().hashCode()}function doMod(a,b){return!1}function sticky_sidebars(){$("aside").stick_in_parent({offset_top:10})}
function group_mods(){var a=document.createElement("style");a.textContent='div.row.group.minified { padding: 4px; } div.img.minified, div.img.minified img { width: 20px !important; height: 20px !important; } div.info.minified { min-height: 20px !important; margin-left: 24px !important; } p.last-activity.minified { float: right; display: inline; } p.last-activity.minified:before { content: "("; } p.last-activity.minified:after { content: ")"; } div.admin.minified a { margin-top: -2px !important; }';a.setAttribute("type",
"text/css");document.head.appendChild(a);$("div#main h2").after('<div id="groupmods" style="display: none; padding: 8px; background: #e5f3d6; border: 1px solid #709343; border-radius: 2px">cyberbit\'s Group Mods: <p><a id="oldgroups" href="javascript:;" onclick="toggleOldGroups(0, this)">Hide Old Groups</a> | <a id="admingroups"href="javascript:;" onclick="toggleOnlyAdminGroups(0, this)">Show Only Admin Groups</a> | <a id="minifygroups"href="javascript:;" onclick="minifyGroups(1, this)">Minify Groups</a></p></div>');
$("div#groupmods").fadeIn(2E3)}
function player_downloads(){$('iframe[src*="/player/"]').load(function(){var a=$(this).contents();addCSS(a,'#title-bar #downloads { display: none; background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAABmJLR0QAJAAkACTORThWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gQHEDcJeUryZgAAAFtJREFUGNONjjEKwDAMA002TZ3yA/n1/pb8DndJg6Gh9MaTEDJbkGQ1SPLJhv1grJV5CrcnOesDknOYmWVmnpaWv/ZpSeoLktTP72JERFVVRMSr8AAA7u4A0P0NFStRvu/GlrMAAAAASUVORK5CYII=") no-repeat 13px 6px; float: right; padding: 0 0 0 28px; color: white; height: 19px;}');addCSS(a,
"#circleG{position:relative;top:8px;width:10.5px}.circleG{background-color:#FFF;float:left;height:2px;margin-left:1px;width:2px;-webkit-animation-name:bounce_circleG;-webkit-animation-duration:1.5s;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:linear;-webkit-border-radius:1px}#circleG_1{-webkit-animation-delay:.3s}#circleG_2{-webkit-animation-delay:.7s}#circleG_3{-webkit-animation-delay:.9s}@-webkit-keyframes bounce_circleG{50%{background-color:#262627}}");a.find("span#likes").before('<span id="downloads"><div id="circleG"><div id="circleG_1" class="circleG"></div><div id="circleG_2" class="circleG"></div><div id="circleG_3" class="circleG"></div></div></span>');
a.find("span#downloads").fadeIn(500);var b=a.find("a").attr("href");$.get(b,function(b){a.find(".circleG").fadeOut(200,function(){$(this).remove();var d='<span id="downloads_count" style="display: none">'+$(b).find("span.downloads").text()+"</span>";a.find("span#downloads").html(d);a.find("#downloads_count").fadeIn(200)})})})}
function super_pages(a,b){function c(c,f){"undefined"==typeof f&&(f=!0);$(a+", nav.pagination").addClass("disabled");$.get(c,function(g){var e=$(g);g=e.find(a);e=e.find("nav.pagination");$(a).html(g.contents());$("nav.pagination").html(e.contents());f&&history.pushState({id:b},"",c);super_pages(a,b);$(a+", nav.pagination").removeClass("disabled")})}$("nav.pagination").length&&(addCSS($(document),".disabled { pointer-events: none; -webkit-user-select: none; -webkit-filter: grayscale(1) opacity(.6); transition: all .3s; } "+
a+" { transition: all .3s; }",b+"-cover-css"),$("nav.pagination a").each(function(){var a=$(this).attr("href");$(this).click(function(b){c(a);b.preventDefault()})}),$(window).on("popstate."+b,function(a){c(location.href,!1)}))}
function watchlist_ui(){function a(a){a?($(".modation_watch").off("click"),$(".modation_watch").html("Unwatch"),$(".modation_watch").click(function(){c()})):($(".modation_watch").off("click"),$(".modation_watch").html("Watch"),$(".modation_watch").click(function(){b()}))}function b(){var b=modationStorage,c=!0;$.each(b[e].watchlist,function(a,b){return b.link==g?c=!1:!0});c&&(b[e].watchlist.push({link:g}),a(!0),update_storage(e,b[e]))}function c(){var b=modationStorage,c=!1;$.each(b[e].watchlist,
function(a,d){return d.link==g?(b[e].watchlist.splice(a,1),c=!0,!1):!0});c&&(a(!1),update_storage(e,b[e]))}var d=location.href.match(/\/group\//),f=location.href.match(/\/user\/[\w-]*\/track\//),g=location.href.replace("http://soundation.com/",""),e=$(".email").text(),h=function(a){var b=!1;$.each(modationStorage[e].watchlist,function(c,d){return d.link==a?(b=!0,!1):!0});return b}(g);(function(){$button=_factory("modation_watch");d&&($("#group-info .join").append("<br>").append($button),$(".modation_watch").css("float",
"right"));f&&$("#main .title").append($button);h?($(".modation_watch").off("click"),$(".modation_watch").html("Unwatch"),$(".modation_watch").click(function(){c()})):($(".modation_watch").off("click"),$(".modation_watch").html("Watch"),$(".modation_watch").click(function(){b()}))})()}function clone_storage(a){"undefined"==typeof a&&(a=function(){});chrome.storage.local.get(function(b){modationStorage=b;console.log(modationStorage);a()})}
function update_storage(a,b){var c={};c[a]=b;chrome.storage.local.set(c,clone_storage)}
function toggleOldGroups(a,b){resetModLinks(1,a,b);jQ(b).parents("#groupmods").nextAll(".list-container").first().children("div.row.group").each(function(b,d){elem=jQ(this).find("p.last-activity")[0];!("undefined"===typeof elem||0<=elem.innerHTML.indexOf("year")||0<=elem.innerHTML.indexOf("month")||0<=elem.innerHTML.search("([5-9]|[123]\\d) days"))||0<jQ(this).find("div.admin").length?(node=jQ(this),node.slideDown(600)):(node=jQ(this),a?node.slideDown(600):node.slideUp(600))});resetModLinks(2,1,b)}
function toggleOnlyAdminGroups(a,b){resetModLinks(2,a,b);jQ(b).parents("#groupmods").nextAll(".list-container").first().children("div.row.group").each(function(b,d){0===jQ(this).find("div.admin").length&&(node=jQ(this),a?node.slideDown(600):node.slideUp(600))});a?resetModLinks(1,a,b):null}
function resetModLinks(a,b,c){switch(a){case 0:jQ(c).closest("a#oldgroups").attr("onclick","toggleOldGroups("+(b?"0":"1")+", this)").html((b?"Hide":"Show")+" Old Groups");jQ(c).closest("a#admingroups").attr("onclick","toggleOnlyAdminGroups("+(b?"0":"1")+", this)").html((b?"Show Only Admin":"Show All")+" Groups");break;case 1:jQ(c).closest("a#oldgroups").attr("onclick","toggleOldGroups("+(b?"0":"1")+", this)").html((b?"Hide":"Show")+" Old Groups");break;case 2:jQ(c).closest("a#admingroups").attr("onclick",
"toggleOnlyAdminGroups("+(b?"0":"1")+", this)").html((b?"Show Only Admin":"Show All")+" Groups")}}
function minifyGroups(a,b){jQ(b).parents("#groupmods").nextAll(".list-container").first().children("div.row.group").each(function(a,b){isAdmin=0<jQ(this).find("div.admin").length;img=jQ(this).find("div.img")[0].outerHTML;link=jQ(this).find("a.name")[0].outerHTML;vLastActivity=jQ(this).find("p.last-activity");lastActivity=0<vLastActivity.length?vLastActivity[0].outerHTML.replace("Last activity ","").replace(" ago",""):"";minifiedContent=img+'<div class="info">'+link+(isAdmin?'<span id="spacer" style="width: 80px; height: 20px; float:right;"></span>':
"")+lastActivity;isAdmin&&(adminButton=jQ(this).find("div.admin a")[0].outerHTML,jQ(this).find("div.admin").html(adminButton),admin=jQ(this).find("div.admin")[0].outerHTML,minifiedContent+=admin+"</div>");jQ(this).html(minifiedContent)});jQ(b).parents("#groupmods").nextAll(".list-container").first().find("div.row.group, div.img, div.info, p.last-activity, div.admin").addClass("minified")};